$(function () {
    var editor = new Livecoder.Editor('editor');
    var message = [
        0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x57, 0x65, 0x6c, 0x63,
        0x6f, 0x6d, 0x65, 0x20, 0x74, 0x6f, 0x20, 0x22, 0x4c, 0x69, 0x76, 0x65, 0x63, 0x6f, 0x64, 0x65,
        0x72, 0x22, 0x21, 0x21, 0x0a, 0x0a, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
        0x59, 0x6f, 0x75, 0x20, 0x63, 0x61, 0x6e, 0x20, 0x64, 0x6f, 0x20, 0x6c, 0x69, 0x76, 0x65, 0x20,
        0x63, 0x6f, 0x64, 0x69, 0x6e, 0x67, 0x20, 0x68, 0x65, 0x72, 0x65, 0x2c, 0x0a, 0x61, 0x6e, 0x64,
        0x20, 0x65, 0x76, 0x65, 0x72, 0x79, 0x6f, 0x6e, 0x65, 0x20, 0x63, 0x61, 0x6e, 0x20, 0x76, 0x69,
        0x65, 0x77, 0x20, 0x79, 0x6f, 0x75, 0x72, 0x20, 0x65, 0x64, 0x69, 0x74, 0x69, 0x6e, 0x67, 0x20,
        0x69, 0x6e, 0x20, 0x72, 0x65, 0x61, 0x6c, 0x20, 0x74, 0x69, 0x6d, 0x65, 0x2e, 0x0a, 0x0a, 0x20,
        0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
        0x20, 0x20, 0x20, 0x20, 0x45, 0x6e, 0x6a, 0x6f, 0x79, 0x21, 0x0a
    ];
    var cursor = $('<div>').css({
        position: 'absolute',
        'z-index': 10,
        'border-left': '1px solid white'
    });
    var appendMessage = function () {
        if (message.length) {
            editor.editor.setValue(
                editor.editor.getValue() + String.fromCharCode(message.shift())
            );
            window.setTimeout(function () {
                appendMessage();
            }, message[0] === 0x20 ? 0 : 75 + Math.floor(Math.random() * 50));
        }
        else {
            editor.editor.setOption('readOnly', false);
            editor.focus();
        }
    };
    editor.editor.setOption('readOnly', true);
    appendMessage();
});
